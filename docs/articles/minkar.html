<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>rminka • rminka</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="rminka">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rminka</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/get_minka_obs_id.html">get_minka_obs_id</a></li>
    <li><a class="dropdown-item" href="../articles/minkar.html">rminka</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Raiservi/minkar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="minkar_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="minkar_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="minkar_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="minkar_files/leaflet-1.3.1/leaflet.js"></script><link href="minkar_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="minkar_files/proj4-2.6.2/proj4.min.js"></script><script src="minkar_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="minkar_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="minkar_files/leaflet-binding-2.2.2/leaflet.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>rminka</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Raiservi/minkar/blob/HEAD/vignettes/minkar.Rmd" class="external-link"><code>vignettes/minkar.Rmd</code></a></small>
      <div class="d-none name"><code>minkar.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="about">About<a class="anchor" aria-label="anchor" href="#about"></a>
</h2>
<p>rminka is a wrapper for Minka APIs for accessing the
observations.</p>
</div>
<div class="section level2">
<h2 id="quickstart-guide">Quickstart guide<a class="anchor" aria-label="anchor" href="#quickstart-guide"></a>
</h2>
<div class="section level3">
<h3 id="get-observations">Get observations<a class="anchor" aria-label="anchor" href="#get-observations"></a>
</h3>
<p><code>get_minka_obs()</code> This function retrieves observations
from Minka. The text or taxon search can be refined by observation date,
record quality and location.</p>
<blockquote>
<p>It is recommended to set the <code>quality</code> argument to
<code>"research"</code> in order to get more reliable data that has been
validated by several contributors.</p>
</blockquote>
<div class="section level4">
<h4 id="fuzzy-search">Fuzzy search<a class="anchor" aria-label="anchor" href="#fuzzy-search"></a>
</h4>
<p>You can search for observations by either common or scientific name.
It will search the entire database, so the search below will return
entries that <em>mention</em> seabream fishes , not just seabream
observations.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sard</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs</span><span class="op">(</span>query <span class="op">=</span> <span class="st">"seabream"</span>, year <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">sard</span><span class="op">$</span><span class="va">scientific_name</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  [1] "Lithognathus mormyrus"   "Sparidae"               </span></span>
<span><span class="co">#&gt;  [3] "Diplodus sargus"         "Diplodus annularis"     </span></span>
<span><span class="co">#&gt;  [5] "Diplodus vulgaris"       "Oblada melanura"        </span></span>
<span><span class="co">#&gt;  [7] "Diplodus puntazzo"       "Sparus aurata"          </span></span>
<span><span class="co">#&gt;  [9] "Pagellus bogaraveo"      "Diplodus cadenati"      </span></span>
<span><span class="co">#&gt; [11] "Pagellus acarne"         "Spondyliosoma cantharus"</span></span>
<span><span class="co">#&gt; [13] "Pagrus caeruleostictus"  "Pagrus auriga"</span></span></code></pre>
<blockquote>
<p>Note that <code>get_minka_obs()</code> will return 500 observations
by default. This can be controlled with the <code>maxresults</code>
argument.</p>
</blockquote>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Geting the first 10 observations using the parameter "maxresults = 10"</span></span>
<span></span>
<span><span class="va">sard_max_results</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs</span><span class="op">(</span>query <span class="op">=</span> <span class="st">"seabream"</span>, year <span class="op">=</span> <span class="fl">2021</span>, maxresults <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sard_max_results</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;          scientific_name                  datetime description</span></span>
<span><span class="co">#&gt; 1  Lithognathus mormyrus 2021-10-03 11:55:00 +0200            </span></span>
<span><span class="co">#&gt; 2               Sparidae 2021-10-03 11:55:00 +0200            </span></span>
<span><span class="co">#&gt; 3        Diplodus sargus 2021-08-05 13:23:00 +0200            </span></span>
<span><span class="co">#&gt; 4     Diplodus annularis 2021-08-04 11:19:00 +0200            </span></span>
<span><span class="co">#&gt; 5        Diplodus sargus 2021-08-03 15:19:00 +0200            </span></span>
<span><span class="co">#&gt; 6      Diplodus vulgaris 2021-08-03 15:19:00 +0200            </span></span>
<span><span class="co">#&gt; 7        Oblada melanura 2021-08-03 15:13:00 +0200            </span></span>
<span><span class="co">#&gt; 8      Diplodus vulgaris 2021-07-28 08:51:00 +0200            </span></span>
<span><span class="co">#&gt; 9        Oblada melanura 2021-07-25 12:10:00 +0200            </span></span>
<span><span class="co">#&gt; 10       Diplodus sargus 2021-07-04 09:52:00 +0200            </span></span>
<span><span class="co">#&gt;          place_guess latitude longitude</span></span>
<span><span class="co">#&gt; 1  Barcelona, España 41.26480  2.005203</span></span>
<span><span class="co">#&gt; 2  Barcelona, España 41.26480  2.005200</span></span>
<span><span class="co">#&gt; 3              Spain 40.05483  3.883954</span></span>
<span><span class="co">#&gt; 4              Spain 39.95923  4.265633</span></span>
<span><span class="co">#&gt; 5                    39.93600  3.937817</span></span>
<span><span class="co">#&gt; 6                    39.93600  3.937833</span></span>
<span><span class="co">#&gt; 7                    39.93646  3.938442</span></span>
<span><span class="co">#&gt; 8                    41.08978  1.228733</span></span>
<span><span class="co">#&gt; 9                    41.08981  1.228671</span></span>
<span><span class="co">#&gt; 10                   41.08979  1.228717</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="taxon-search">Taxon search<a class="anchor" aria-label="anchor" href="#taxon-search"></a>
</h4>
<p>To return only records of a specific species or taxonomic group, use
the <code>taxon_name</code> argument. For example, to return
observations of anything from the family, and restricting the search to
the year 2015:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Geting al the Sparidae observations for the year 2022</span></span>
<span></span>
<span><span class="va">sparidae</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs</span><span class="op">(</span>taxon_name  <span class="op">=</span> <span class="st">"Sparidae"</span>, year <span class="op">=</span> <span class="fl">2022</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># how many unique taxa?</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">sparidae</span><span class="op">$</span><span class="va">scientific_name</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 20</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#The species are:</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">sparidae</span><span class="op">$</span><span class="va">scientific_name</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  [1] "Pagrus pagrus"           "Diplodus cervinus"      </span></span>
<span><span class="co">#&gt;  [3] "Diplodus vulgaris"       "Oblada melanura"        </span></span>
<span><span class="co">#&gt;  [5] "Diplodus puntazzo"       "Diplodus sargus"        </span></span>
<span><span class="co">#&gt;  [7] "Sparus aurata"           "Lithognathus mormyrus"  </span></span>
<span><span class="co">#&gt;  [9] "Sarpa salpa"             "Boops boops"            </span></span>
<span><span class="co">#&gt; [11] "Dentex dentex"           "Pagellus acarne"        </span></span>
<span><span class="co">#&gt; [13] "Pagellus erythrinus"     "Dentex gibbosus"        </span></span>
<span><span class="co">#&gt; [15] "Spondyliosoma cantharus" "Sparidae"               </span></span>
<span><span class="co">#&gt; [17] "Pagrus auriga"           "Diplodus annularis"     </span></span>
<span><span class="co">#&gt; [19] "Diplodus"                "Diplodus cadenati"</span></span></code></pre>
<p>And to return only the seabream fish observations that also mention
the term “banc”:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sard_banc</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs</span><span class="op">(</span>taxon_name <span class="op">=</span> <span class="st">"Diplodus"</span>, query <span class="op">=</span> <span class="st">"banc"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#number of Diplodus taxon observations with the term "banc"</span></span>
<span></span>
<span><span class="va">count_sard</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">sard_banc</span><span class="op">)</span></span>
<span></span>
<span><span class="va">count_sard</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 4</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#the observarions are</span></span>
<span></span>
<span><span class="va">sard_banc</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">count_sard</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;     scientific_name                  datetime</span></span>
<span><span class="co">#&gt; 1 Diplodus vulgaris 2018-07-26 00:00:00 +0100</span></span>
<span><span class="co">#&gt; 2 Diplodus vulgaris 2018-07-26 00:00:00 +0100</span></span>
<span><span class="co">#&gt; 3 Diplodus vulgaris 2018-07-04 00:00:00 +0100</span></span>
<span><span class="co">#&gt; 4 Diplodus vulgaris 2019-07-21 00:00:00 +0100</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="bounding-box-search">Bounding box search<a class="anchor" aria-label="anchor" href="#bounding-box-search"></a>
</h4>
<p>You can also search within a bounding box by giving a simple set of
coordinates. The set of coordinates are defined by c( min Long, min Lat,
max Long, max Lat)</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Search by area Piscines Forum</span></span>
<span></span>
<span><span class="va">bounds_forum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">41.407281</span>, <span class="fl">2.224977</span>, <span class="fl">41.409892</span>, <span class="fl">2.228652</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">diplodus_forum</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs</span><span class="op">(</span>query <span class="op">=</span> <span class="st">"Diplodus sargus"</span>, bounds <span class="op">=</span> <span class="va">bounds_forum</span>, year <span class="op">=</span> <span class="fl">2024</span>, month <span class="op">=</span> <span class="fl">5</span>, maxresults <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diplodus_forum</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   scientific_name                  datetime description place_guess latitude</span></span>
<span><span class="co">#&gt; 1 Diplodus sargus 2024-05-18 11:40:00 +0200          NA       Forum 41.40921</span></span>
<span><span class="co">#&gt;   longitude</span></span>
<span><span class="co">#&gt; 1  2.227122</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#The representation using leaflet</span></span>
<span></span>
<span><span class="fu">leaflet</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>          <span class="fu">setView</span><span class="op">(</span>lng <span class="op">=</span> <span class="fl">41.408492</span> , lat <span class="op">=</span> <span class="fl">2.226725</span> , zoom <span class="op">=</span> <span class="fl">15</span><span class="op">)</span>  <span class="op">%&gt;%</span></span>
<span><span class="fu">addRectangles</span><span class="op">(</span>lng1 <span class="op">=</span> <span class="fl">41.407281</span>, lat1 <span class="op">=</span> <span class="fl">2.224977</span>,</span>
<span>                lng2 <span class="op">=</span> <span class="fl">41.409892</span>, lat2 <span class="op">=</span> <span class="fl">2.228652</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>                 <span class="fu">addMarkers</span><span class="op">(</span>lng <span class="op">=</span> <span class="va">diplodus_forum</span><span class="op">$</span><span class="va">longitude</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, lat <span class="op">=</span> <span class="va">diplodus_forum</span><span class="op">$</span><span class="va">latitude</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,group <span class="op">=</span> <span class="st">"Markers"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[2.226725,41.408492],15,[]],"calls":[{"method":"addRectangles","args":[2.224977,41.407281,2.228652,41.409892,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[41.4092118676,41.4092118676,41.4088239352,41.4088239352,41.4088239352,41.4087320964],[2.2271221464,2.2271221464,2.2274765389,2.2274765389,2.2274765389,2.2262992385],null,null,"Markers",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[2.224977,41.4092118676],"lng":[2.2262992385,41.409892]}},"evals":[],"jsHooks":[]}</script><p class="caption">
Map of Salpa salpa observations
</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="other-functions">Other functions<a class="anchor" aria-label="anchor" href="#other-functions"></a>
</h3>
<div class="section level4">
<h4 id="get-information-and-observations-by-project">Get information and observations by project<a class="anchor" aria-label="anchor" href="#get-information-and-observations-by-project"></a>
</h4>
<p>You can get all the observations for a project if you know its ID or
name as an Minka slug.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Just get info about a project</span></span>
<span><span class="va">urbamar</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs_project</span><span class="op">(</span><span class="st">"urbamarbio"</span>, type <span class="op">=</span> <span class="st">"info"</span>, raw <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">urbamar</span><span class="op">$</span><span class="va">project_observations_count</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 55925</span></span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Now get all the observations for that project</span></span>
<span><span class="va">urbamar_obs</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs_project</span><span class="op">(</span><span class="st">"biodiversitat-marina-de-les-platges-de-sant-adria-del-besos"</span>, type <span class="op">=</span> <span class="st">"observations"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Getting records 0-200</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Getting records up to 400</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Getting records up to 600</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Getting records up to 800</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Getting records up to 1000</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Getting records up to 1200</span></span></code></pre>
<pre><code><span><span class="co">#&gt; Done.</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Geting the first 5 observations</span></span>
<span></span>
<span><span class="va">urbamar_obs</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="fl">8</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;         species_guess timeframe map_scale    longitude      latitude</span></span>
<span><span class="co">#&gt; 1        Rabosa groga        NA        NA 2.2384089231 41.4250151953</span></span>
<span><span class="co">#&gt; 2   Bavosa de plomall        NA        NA 2.2384089231 41.4250151953</span></span>
<span><span class="co">#&gt; 3             Morruda        NA        NA 2.2384089231 41.4250151953</span></span>
<span><span class="co">#&gt; 4 Limaria tuberculata        NA        NA 2.2384089231 41.4250151953</span></span>
<span><span class="co">#&gt; 5             Variada        NA        NA 2.2384089231 41.4250151953</span></span>
<span><span class="co">#&gt;   description observed_on     id</span></span>
<span><span class="co">#&gt; 1        &lt;NA&gt;  2024-09-10 354734</span></span>
<span><span class="co">#&gt; 2        &lt;NA&gt;  2024-09-10 354735</span></span>
<span><span class="co">#&gt; 3        &lt;NA&gt;  2024-09-10 354736</span></span>
<span><span class="co">#&gt; 4        &lt;NA&gt;  2024-09-10 354737</span></span>
<span><span class="co">#&gt; 5        &lt;NA&gt;  2024-09-10 354738</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="get-observation-details">Get observation details<a class="anchor" aria-label="anchor" href="#get-observation-details"></a>
</h4>
<p>Detailed information about a specific observation can be retrieved by
observation ID. The easiest way to get the ID is from a previous search
for that taxon.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ident</span> <span class="op">&lt;-</span> <span class="va">sard_banc</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="va">ident</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 80229</span></span></code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#get_minka_obs_id(ident)[1:4,1:5]</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-all-observations-by-user">Get all observations by user<a class="anchor" aria-label="anchor" href="#get-all-observations-by-user"></a>
</h4>
<p>If you just want all the observations by a user you can download all
their observations by user ID. A word of warning though, this can be
quite large (easily into the 1000’s).</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">user_exempl</span> <span class="op">&lt;-</span> <span class="va">sard_banc</span><span class="op">$</span><span class="va">user_login</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">user_exempl</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "xatrac"</span></span></code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">user_obs</span> <span class="op">&lt;-</span> <span class="fu">get_minka_obs_user</span><span class="op">(</span><span class="va">user_exempl</span>, maxresults <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="va">user_obs</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;           scientific_name                  datetime description</span></span>
<span><span class="co">#&gt; 1    Spurilla neapolitana 2023-05-25 10:59:00 +0200          NA</span></span>
<span><span class="co">#&gt; 2      Posidonia oceanica 2023-05-18 10:05:00 +0200          NA</span></span>
<span><span class="co">#&gt; 3         Diplodus sargus 2022-09-21 10:47:00 +0200          NA</span></span>
<span><span class="co">#&gt; 4 Cotylorhiza tuberculata 2022-09-21 10:47:00 +0200          NA</span></span>
<span><span class="co">#&gt; 5         Oblada melanura 2022-09-21 10:47:00 +0200          NA</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="stats-by-taxa">Stats by taxa<a class="anchor" aria-label="anchor" href="#stats-by-taxa"></a>
</h4>
<p>Basic statistics are available for taxa counts by date, date range,
place ID (numeric ID), or user ID (string). Only the top 5 species are
listed.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## By date</span></span>
<span><span class="va">counts</span> <span class="op">&lt;-</span> <span class="fu">get_inat_taxon_stats</span><span class="op">(</span>date <span class="op">=</span> <span class="st">"2020-06-14"</span><span class="op">)</span></span>
<span><span class="va">counts</span><span class="op">$</span><span class="va">total</span></span>
<span><span class="co">#&gt; [1] 25763</span></span>
<span><span class="co">### Top 5 species</span></span>
<span><span class="va">counts</span><span class="op">$</span><span class="va">species_counts</span></span>
<span><span class="co">#&gt;   count taxon.id           taxon.name taxon.rank taxon.rank_level taxon.default_name.id</span></span>
<span><span class="co">#&gt; 1   380    48484    Harmonia axyridis    species               10                 89147</span></span>
<span><span class="co">#&gt; 2   332    56057 Leucanthemum vulgare    species               10                924783</span></span>
<span><span class="co">#&gt; 3   330    52821 Achillea millefolium    species               10                942097</span></span>
<span><span class="co">#&gt; 4   319    51875   Trifolium pratense    species               10                942055</span></span>
<span><span class="co">#&gt; 5   304    55745     Trifolium repens    species               10                943715</span></span>
<span><span class="co">#&gt;   taxon.default_name.name taxon.default_name.is_valid taxon.default_name.lexicon</span></span>
<span><span class="co">#&gt; 1       Asian Lady Beetle                        TRUE                    English</span></span>
<span><span class="co">#&gt; 2             oxeye daisy                        TRUE                    English</span></span>
<span><span class="co">#&gt; 3           Common Yarrow                        TRUE                    English</span></span>
<span><span class="co">#&gt; 4              red clover                        TRUE                    English</span></span>
<span><span class="co">#&gt; 5            white clover                        TRUE                    English</span></span>
<span><span class="co">#&gt;                                                             taxon.image_url taxon.iconic_taxon_name</span></span>
<span><span class="co">#&gt; 1                 https://static.inaturalist.org/photos/30978499/square.jpg                 Insecta</span></span>
<span><span class="co">#&gt; 2 https://inaturalist-open-data.s3.amazonaws.com/photos/71002344/square.jpg                 Plantae</span></span>
<span><span class="co">#&gt; 3     https://inaturalist-open-data.s3.amazonaws.com/photos/4902/square.jpg                 Plantae</span></span>
<span><span class="co">#&gt; 4                 https://static.inaturalist.org/photos/38032773/square.jpg                 Plantae</span></span>
<span><span class="co">#&gt; 5 https://inaturalist-open-data.s3.amazonaws.com/photos/86716150/square.jpg                 Plantae</span></span>
<span><span class="co">#&gt;   taxon.conservation_status_name</span></span>
<span><span class="co">#&gt; 1                           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2                           &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3                  least_concern</span></span>
<span><span class="co">#&gt; 4                  least_concern</span></span>
<span><span class="co">#&gt; 5                           &lt;NA&gt;</span></span>
<span><span class="co">### Most common taxon ranks</span></span>
<span><span class="va">counts</span><span class="op">$</span><span class="va">rank_counts</span></span>
<span><span class="co">#&gt; $species</span></span>
<span><span class="co">#&gt; [1] 18886</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $genus</span></span>
<span><span class="co">#&gt; [1] 3645</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subspecies</span></span>
<span><span class="co">#&gt; [1] 758</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $family</span></span>
<span><span class="co">#&gt; [1] 611</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subfamily</span></span>
<span><span class="co">#&gt; [1] 373</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tribe</span></span>
<span><span class="co">#&gt; [1] 338</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $variety</span></span>
<span><span class="co">#&gt; [1] 233</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subgenus</span></span>
<span><span class="co">#&gt; [1] 159</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $order</span></span>
<span><span class="co">#&gt; [1] 120</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $hybrid</span></span>
<span><span class="co">#&gt; [1] 95</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $superfamily</span></span>
<span><span class="co">#&gt; [1] 85</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $section</span></span>
<span><span class="co">#&gt; [1] 84</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subtribe</span></span>
<span><span class="co">#&gt; [1] 80</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $complex</span></span>
<span><span class="co">#&gt; [1] 76</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $class</span></span>
<span><span class="co">#&gt; [1] 39</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $suborder</span></span>
<span><span class="co">#&gt; [1] 39</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $infraorder</span></span>
<span><span class="co">#&gt; [1] 29</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $phylum</span></span>
<span><span class="co">#&gt; [1] 22</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subclass</span></span>
<span><span class="co">#&gt; [1] 20</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $form</span></span>
<span><span class="co">#&gt; [1] 12</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subsection</span></span>
<span><span class="co">#&gt; [1] 9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subphylum</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $infraclass</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $kingdom</span></span>
<span><span class="co">#&gt; [1] 5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $superorder</span></span>
<span><span class="co">#&gt; [1] 4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $genushybrid</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $zoosection</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $epifamily</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $subterclass</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $zoosubsection</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="stats-by-user">Stats by user<a class="anchor" aria-label="anchor" href="#stats-by-user"></a>
</h4>
<p>Similar statistics can be gotten for users. The same input parameters
can be used.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## By date</span></span>
<span><span class="va">counts</span> <span class="op">&lt;-</span> <span class="fu">get_inat_user_stats</span><span class="op">(</span>date <span class="op">=</span> <span class="st">"2010-06-14"</span><span class="op">)</span></span>
<span><span class="va">counts</span><span class="op">$</span><span class="va">total</span></span>
<span><span class="co">#&gt; [1] 341</span></span>
<span><span class="va">counts</span><span class="op">$</span><span class="va">most_observations</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;    count user.id      user.login       user.name</span></span>
<span><span class="co">#&gt; 1    129  245282  hughmcguinness Hugh McGuinness</span></span>
<span><span class="co">#&gt; 2     53  811118     sandbankspp                </span></span>
<span><span class="co">#&gt; 3     50 3334393 koniakin_serhii Serhii Koniakin</span></span>
<span><span class="co">#&gt; 4     34  541847      billhubick     Bill Hubick</span></span>
<span><span class="co">#&gt; 5     31    6930       tgosliner  Terry Gosliner</span></span>
<span><span class="co">#&gt; 6     31 2883853      linkmdavis      Link Davis</span></span>
<span><span class="co">#&gt; 7     30   46945             abe    T. Abe Lloyd</span></span>
<span><span class="co">#&gt; 8     26  280446         mtjones      Mike Jones</span></span>
<span><span class="co">#&gt; 9     25  761669 kathleenfspicer            &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 10    21    2616     alice_abela     Alice Abela</span></span>
<span><span class="co">#&gt;                                                                     user.user_icon_url</span></span>
<span><span class="co">#&gt; 1   https://static.inaturalist.org/attachments/users/icons/245282/thumb.jpg?1475532481</span></span>
<span><span class="co">#&gt; 2  https://static.inaturalist.org/attachments/users/icons/811118/thumb.jpeg?1535236899</span></span>
<span><span class="co">#&gt; 3  https://static.inaturalist.org/attachments/users/icons/3334393/thumb.jpg?1650572950</span></span>
<span><span class="co">#&gt; 4   https://static.inaturalist.org/attachments/users/icons/541847/thumb.jpg?1582771190</span></span>
<span><span class="co">#&gt; 5     https://static.inaturalist.org/attachments/users/icons/6930/thumb.jpg?1475530872</span></span>
<span><span class="co">#&gt; 6  https://static.inaturalist.org/attachments/users/icons/2883853/thumb.jpg?1647293664</span></span>
<span><span class="co">#&gt; 7    https://static.inaturalist.org/attachments/users/icons/46945/thumb.jpg?1624289207</span></span>
<span><span class="co">#&gt; 8   https://static.inaturalist.org/attachments/users/icons/280446/thumb.jpg?1635600681</span></span>
<span><span class="co">#&gt; 9                                                                                 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 10    https://static.inaturalist.org/attachments/users/icons/2616/thumb.jpg?1475528533</span></span>
<span><span class="va">counts</span><span class="op">$</span><span class="va">most_species</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;    count user.id      user.login           user.name</span></span>
<span><span class="co">#&gt; 1     89  245282  hughmcguinness     Hugh McGuinness</span></span>
<span><span class="co">#&gt; 2     47  811118     sandbankspp                    </span></span>
<span><span class="co">#&gt; 3     36 3334393 koniakin_serhii     Serhii Koniakin</span></span>
<span><span class="co">#&gt; 4     25    6930       tgosliner      Terry Gosliner</span></span>
<span><span class="co">#&gt; 5     24   46945             abe        T. Abe Lloyd</span></span>
<span><span class="co">#&gt; 6     24  761669 kathleenfspicer                &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7     17    2616     alice_abela         Alice Abela</span></span>
<span><span class="co">#&gt; 8     17  495266        maxa11an Max Allan Niklasson</span></span>
<span><span class="co">#&gt; 9     17  541847      billhubick         Bill Hubick</span></span>
<span><span class="co">#&gt; 10    15  280446         mtjones          Mike Jones</span></span>
<span><span class="co">#&gt;                                                                     user.user_icon_url</span></span>
<span><span class="co">#&gt; 1   https://static.inaturalist.org/attachments/users/icons/245282/thumb.jpg?1475532481</span></span>
<span><span class="co">#&gt; 2  https://static.inaturalist.org/attachments/users/icons/811118/thumb.jpeg?1535236899</span></span>
<span><span class="co">#&gt; 3  https://static.inaturalist.org/attachments/users/icons/3334393/thumb.jpg?1650572950</span></span>
<span><span class="co">#&gt; 4     https://static.inaturalist.org/attachments/users/icons/6930/thumb.jpg?1475530872</span></span>
<span><span class="co">#&gt; 5    https://static.inaturalist.org/attachments/users/icons/46945/thumb.jpg?1624289207</span></span>
<span><span class="co">#&gt; 6                                                                                 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7     https://static.inaturalist.org/attachments/users/icons/2616/thumb.jpg?1475528533</span></span>
<span><span class="co">#&gt; 8  https://static.inaturalist.org/attachments/users/icons/495266/thumb.jpeg?1579782546</span></span>
<span><span class="co">#&gt; 9   https://static.inaturalist.org/attachments/users/icons/541847/thumb.jpg?1582771190</span></span>
<span><span class="co">#&gt; 10  https://static.inaturalist.org/attachments/users/icons/280446/thumb.jpg?1635600681</span></span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## By place_ID</span></span>
<span><span class="va">vt_crows</span> <span class="op">&lt;-</span> <span class="fu">get_inat_obs_project</span><span class="op">(</span><span class="st">"crows-in-vermont"</span>, type <span class="op">=</span> <span class="st">"info"</span>, raw <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; 206 records</span></span>
<span><span class="va">place_counts</span> <span class="op">&lt;-</span> <span class="fu">get_inat_user_stats</span><span class="op">(</span>place <span class="op">=</span> <span class="va">vt_crows</span><span class="op">$</span><span class="va">place_id</span><span class="op">)</span></span>
<span><span class="va">place_counts</span><span class="op">$</span><span class="va">total</span></span>
<span><span class="co">#&gt; [1] 19115</span></span>
<span><span class="va">place_counts</span><span class="op">$</span><span class="va">most_observations</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;    count user.id    user.login       user.name</span></span>
<span><span class="co">#&gt; 1  89462   12158 erikamitchell  Erika Mitchell</span></span>
<span><span class="co">#&gt; 2  41524    2179       charlie    Charlie Hohn</span></span>
<span><span class="co">#&gt; 3  21073   12610  susanelliott   Susan Elliott</span></span>
<span><span class="co">#&gt; 4  12368   20198 joshualincoln  Joshua Lincoln</span></span>
<span><span class="co">#&gt; 5  11978   12045      larry522  Larry Clarfeld</span></span>
<span><span class="co">#&gt; 6  11906 1168695       trscavo       Tom Scavo</span></span>
<span><span class="co">#&gt; 7  10906  171529        nsharp Nathaniel Sharp</span></span>
<span><span class="co">#&gt; 8  10848    6624   joannerusso                </span></span>
<span><span class="co">#&gt; 9  10444  108365     judywelna                </span></span>
<span><span class="co">#&gt; 10  9906     317   kpmcfarland  Kent McFarland</span></span>
<span><span class="co">#&gt;                                                                     user.user_icon_url</span></span>
<span><span class="co">#&gt; 1    https://static.inaturalist.org/attachments/users/icons/12158/thumb.jpg?1586465563</span></span>
<span><span class="co">#&gt; 2     https://static.inaturalist.org/attachments/users/icons/2179/thumb.jpg?1569109298</span></span>
<span><span class="co">#&gt; 3    https://static.inaturalist.org/attachments/users/icons/12610/thumb.jpg?1475533475</span></span>
<span><span class="co">#&gt; 4    https://static.inaturalist.org/attachments/users/icons/20198/thumb.jpg?1475538276</span></span>
<span><span class="co">#&gt; 5    https://static.inaturalist.org/attachments/users/icons/12045/thumb.jpg?1475533238</span></span>
<span><span class="co">#&gt; 6  https://static.inaturalist.org/attachments/users/icons/1168695/thumb.png?1535480090</span></span>
<span><span class="co">#&gt; 7   https://static.inaturalist.org/attachments/users/icons/171529/thumb.jpg?1544399969</span></span>
<span><span class="co">#&gt; 8     https://static.inaturalist.org/attachments/users/icons/6624/thumb.jpg?1639690628</span></span>
<span><span class="co">#&gt; 9   https://static.inaturalist.org/attachments/users/icons/108365/thumb.jpg?1475547470</span></span>
<span><span class="co">#&gt; 10     https://static.inaturalist.org/attachments/users/icons/317/thumb.png?1634743248</span></span>
<span><span class="va">place_counts</span><span class="op">$</span><span class="va">most_species</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;    count user.id    user.login       user.name</span></span>
<span><span class="co">#&gt; 1   3561   12158 erikamitchell  Erika Mitchell</span></span>
<span><span class="co">#&gt; 2   2465   12610  susanelliott   Susan Elliott</span></span>
<span><span class="co">#&gt; 3   2390   12045      larry522  Larry Clarfeld</span></span>
<span><span class="co">#&gt; 4   2033    2179       charlie    Charlie Hohn</span></span>
<span><span class="co">#&gt; 5   1926   13355        beeboy   Spencer Hardy</span></span>
<span><span class="co">#&gt; 6   1877    6624   joannerusso                </span></span>
<span><span class="co">#&gt; 7   1854  171529        nsharp Nathaniel Sharp</span></span>
<span><span class="co">#&gt; 8   1830   20198 joshualincoln  Joshua Lincoln</span></span>
<span><span class="co">#&gt; 9   1754 2860446      er-birds                </span></span>
<span><span class="co">#&gt; 10  1550     317   kpmcfarland  Kent McFarland</span></span>
<span><span class="co">#&gt;                                                                     user.user_icon_url</span></span>
<span><span class="co">#&gt; 1    https://static.inaturalist.org/attachments/users/icons/12158/thumb.jpg?1586465563</span></span>
<span><span class="co">#&gt; 2    https://static.inaturalist.org/attachments/users/icons/12610/thumb.jpg?1475533475</span></span>
<span><span class="co">#&gt; 3    https://static.inaturalist.org/attachments/users/icons/12045/thumb.jpg?1475533238</span></span>
<span><span class="co">#&gt; 4     https://static.inaturalist.org/attachments/users/icons/2179/thumb.jpg?1569109298</span></span>
<span><span class="co">#&gt; 5    https://static.inaturalist.org/attachments/users/icons/13355/thumb.jpg?1475533838</span></span>
<span><span class="co">#&gt; 6     https://static.inaturalist.org/attachments/users/icons/6624/thumb.jpg?1639690628</span></span>
<span><span class="co">#&gt; 7   https://static.inaturalist.org/attachments/users/icons/171529/thumb.jpg?1544399969</span></span>
<span><span class="co">#&gt; 8    https://static.inaturalist.org/attachments/users/icons/20198/thumb.jpg?1475538276</span></span>
<span><span class="co">#&gt; 9  https://static.inaturalist.org/attachments/users/icons/2860446/thumb.jpg?1588019864</span></span>
<span><span class="co">#&gt; 10     https://static.inaturalist.org/attachments/users/icons/317/thumb.png?1634743248</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="mapping">Mapping<a class="anchor" aria-label="anchor" href="#mapping"></a>
</h3>
<p>Basic maps can be created with the <code>minka_map()</code> function
to quickly visualize search results. The <code>plot = FALSE</code>
option can be used to avoid displaying the initial plot when further
customising it with ggplot2 functions.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Map 100 spotted salamanders</span></span>
<span><span class="va">a_mac</span> <span class="op">&lt;-</span> <span class="fu">get_inat_obs</span><span class="op">(</span>taxon_name <span class="op">=</span> <span class="st">"Ambystoma maculatum"</span>, year <span class="op">=</span> <span class="fl">2021</span><span class="op">)</span></span>
<span><span class="va">salamander_map</span> <span class="op">&lt;-</span> <span class="fu">inat_map</span><span class="op">(</span><span class="va">a_mac</span>, plot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Further customise the returned ggplot object</span></span>
<span><span class="va">salamander_map</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/borders.html" class="external-link">borders</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="unnamed-chunk-13-1.png" title="plot of chunk unnamed-chunk-13" alt="plot of chunk unnamed-chunk-13" width="504"></p>
<p><code>inat_map()</code> is useful for quickly mapping single-species
data obtained with rinat. However, more complicated plots are best made
from scratch. Here is an example of customised map that does not make
use of it. (Note the use of <code>quality = "research"</code> to
restrict the search to the more reliable observations.)</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## A more elaborate map of Colibri sp.</span></span>
<span><span class="va">colibri</span> <span class="op">&lt;-</span> <span class="fu">get_inat_obs</span><span class="op">(</span>taxon_name <span class="op">=</span> <span class="st">"Colibri"</span>,</span>
<span>                        quality <span class="op">=</span> <span class="st">"research"</span>,</span>
<span>                        maxresults <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">colibri</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">longitude</span>,</span>
<span>                         y <span class="op">=</span> <span class="va">latitude</span>,</span>
<span>                         colour <span class="op">=</span> <span class="va">scientific_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/map_data.html" class="external-link">map_data</a></span><span class="op">(</span><span class="st">"world"</span><span class="op">)</span>,</span>
<span>                   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>,</span>
<span>                   fill <span class="op">=</span> <span class="st">"grey95"</span>,</span>
<span>                   color <span class="op">=</span> <span class="st">"gray40"</span>,</span>
<span>                   size <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">0.7</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">colibri</span><span class="op">$</span><span class="va">longitude</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>              ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html" class="external-link">range</a></span><span class="op">(</span><span class="va">colibri</span><span class="op">$</span><span class="va">latitude</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="unnamed-chunk-14-1.png" title="plot of chunk unnamed-chunk-14" alt="plot of chunk unnamed-chunk-14" width="504"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
